const mongoose = require("mongoose");

const url = `mongodb://${process.env.MONGODB_PORT || '127.0.0.1'}/malware`;

mongoose.connect(url);

const fileSchema = new mongoose.Schema({
    name: {type: String, required: true},
    type: String,
    size: Number,
    hashSHA256: {type: String, unique: true},
    hashMD5: String

});

const File = mongoose.model("File", fileSchema);

let file = {
    name: "Test",
    type: "test",
    size: 230,
    hashSHA256: "test1"
}

async function createFile(fileObject){
    try{
        const file  = await File.create(fileObject);
        await file.save();
        console.log("added malware to db");
    } catch (e){
        console.error(e);
    }
}

// createFile(file);

module.exports = {createFile}