import React, { useState } from 'react';
import './App.css';
import Header from "./Header"
import Form from "./Form"
import Info from './Info';
import Graph from "./Graph"

function App() {

    const [uploaded, setUploaded] = useState(false)
    const [file, setFile] = useState()
    const [hash, setHash] = useState({ hashSHA256: "", hashMD5: "" })
    const [graphLocation, setGraphLocation] = useState(null)
    const [hashStatus, setHashStatus] = useState()

    const updateStates = (uploadStatus=false, info=null, newHash=null, hashStatus=null, graphLocation=null) => {
        setUploaded(uploadStatus);
        setFile(info)
        setHash(newHash)
        setHashStatus(hashStatus)
        setGraphLocation(graphLocation)
    }

    return (
        <div>
            <Header />
            <Form onUpdate={ updateStates } />
            { uploaded && 
                <Info name={ file.name } type={ file.type } size={ file.size } lastModified={ file.lastModified } hash={ hash } hashStatus={ hashStatus } />
            }
            { graphLocation && <Graph graphLocation={ graphLocation } /> }
        </div>
  );
}

export default App;
